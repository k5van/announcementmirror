/*
	LiveWebDev Team
	unicode error decodeURIComponent 2012-03-21
*/
(function(b){function a(){this._cookdomain="nexon.com";this._nxplaytimer=0;this._ready=false;this._location={};this._referrer={};this._refdomain="";this._gameCode="";this._identity="";this._pageCode="";this._guid="";this._suid="";this._puid="";this._naid="";this._gaid="";this._globalstep=0;this._privatestep=0;this._params=[];this._cookpageCode="";this.func={request:function(c){var d=b.location.search.substring(1).split("&");return this.getval(d,c)},trim:function(c){return c.replace(/^\s+|\s+$/g,"")},newid:function(){this.s4=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(this.s4()+this.s4()+this.s4()+this.s4()+this.s4()+this.s4()+this.s4()+this.s4()).toUpperCase()},urlparse:function(f){var g={protocol:"",hostname:"",pathname:"",search:""};var e=f.split("/");if(e.length>1){g.protocol=e[0];g.hostname=(e[2].indexOf(":")>0)?e[2].substring(0,e[2].indexOf(":")-1):e[2];var d=[];for(var c=3;c<e.length;c++){if(c==e.length-1&&e[c].indexOf("?")>0){d.push(e[c].substring(0,e[c].indexOf("?")))}else{d.push(e[c])}}g.pathname="/"+d.join("/");if(f.indexOf("?")>0){g.search=f.substring(f.indexOf("?"))}}return g},subhost:function(d){var c=d.split(".");return c[0]},subdomain:function(f){var e=f.split(".");var d="";var c="";if(e.length>3){if(e[e.length]==2&&e[e.length-1]==2){d=e[e.length-4];c=e[e.length-3]+"."+e[e.length-2]+"."+e[e.length-1]}else{d=e[e.length-3];c=e[e.length-2]+"."+e[e.length-1]}}else{if(e.length==3){d=e[0];c=e[1]+"."+e[2]}else{if(e.length==2){if(f=="nexon.com"){d="www";c=e[0]+"."+e[1]}else{d=e[0];c=e[1]}}else{if(e.length==1){d=f}}}}if(d.toLowerCase()=="classicrpg"){d="classic"}else{if(d.toLowerCase()=="photo"){d="home"}else{if(d.toLowerCase()=="fsf-cont"){d="fsf"}else{if(d.toLowerCase()=="cso"){d="csonline"}else{if(d.toLowerCase()=="gline"){d="grandline"}else{if(d.toLowerCase()=="freecashcharge"){d="freecash"}}}}}}return d+"."+c},getval:function(c,g){var d="",h="";for(var f=0;f<c.length;f++){h=this.trim(c[f]);if(h.substring(0,g.length+1).toLowerCase()==(g.toLowerCase()+"=")){d=h.substring(g.length+1);break}}try{return decodeURIComponent(d.replace(/%/gi,"&#37"))}catch(j){return d}},cook:function(k,j,i,n){if(typeof(i)!="undefined"){n=n||{};if(i===null){i="";n.expires=-1}var d="";if(n.expires&&(typeof(n.expires)=="number"||n.expires.toUTCString)){var e;if(typeof(n.expires)=="number"){e=new Date();e.setTime(e.getTime()+(n.expires*24*60*60*1000))}else{e=n.expires}d="; expires="+e.toUTCString()}var m=n.path?"; path="+(n.path):"";var g=n.domain?"; domain="+(n.domain):"";var c=n.secure?"; secure":"";document.cookie=[k,"=",i,d,m,g,c].join("")}else{var f="";if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");f=this.getval(l,k);if(typeof(j)!="undefined"){var h=f.split("&");f=this.getval(h,j)}}return f}},send:function(c){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=("https:"==document.location.protocol?"https://":"http://")+c;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(e,d)},arrayclone:function(e){var c=new Array();for(var d in e){c[d]=typeof(e[d])=="object"?this.arrayclone(e[d]):e[d]}return c},getKeyword:function(e){var d=["nate.com","daum.net","chol.com","www.google","joinsmsn.com","altavista.com","d.paran.com","qsearch.korea.com","find.netpia.com","easysearch.ilikeclick.com"];for(var c=0;c<d.length;c++){if(e.hostname.indexOf(d[c])>=0){return this.getval(e.search.substring(1).split("&"),"q")}}d=["naver.com","korea.com","paran.com","dns.olleh.com","newsearch.udiem.com"];for(var c=0;c<d.length;c++){if(e.hostname.indexOf(d[c])>=0){return this.getval(e.search.substring(1).split("&"),"query")}}if(e.hostname.indexOf("yahoo.")>=0){return this.getval(e.search.substring(1).split("&"),"p")}if(e.hostname.indexOf("freechal.com")>=0){return this.getval(e.search.substring(1).split("&"),"keyword")}return""}};this.initializeHandler=function(){if(this._ready){return}this._location=b.location;this._location.subDomain=this.func.subdomain(this._location.hostname);this._referrer=this.func.urlparse(b.document.referrer);this._referrer.subDomain=this.func.subdomain(this._referrer.hostname);this._gameCode=this.func.subhost(this.func.subdomain(this._location.hostname));try{if(top.document!=self.document){this._referrer=this.func.urlparse(top.window.document.referrer)}}catch(e){}if(typeof(__nxArgs)!=undefined){if(typeof(__nxArgs)=="object"){if(__nxArgs.identity){this._identity=__nxArgs.identity}if(__nxArgs.pageCode){this._pageCode=__nxArgs.pageCode}}}if(this.func.cook("IL")=="1"){this._naid=this.func.cook("NXCH","OID")}if(this.func.cook("NXGID").length>0){this._guid=this.func.cook("NXGID")}else{this._guid=this.func.newid();this._globalstep=1}this.func.cook("NXGID","",this._guid,{domain:this._cookdomain,path:"/",expires:30});if(this._referrer.hostname!=""){if(this._referrer.hostname.toLowerCase()=="s.nx.com"){var h=this._referrer.pathname.split("/");var f="";if(h.length>=2){if(h[2].toLowerCase()=="tw2006"){f="tales"}else{if(h[3].toLowerCase()=="cso"){f="csonline"}else{if(h[3].toLowerCase()=="dn"){f="dragonnest"}else{if(h[3].toLowerCase()=="2012seoul"){f="2012"}else{if(h[3].toLowerCase()==this._gameCode.toLowerCase()){f=this._gameCode.toLowerCase()}else{if(this._gameCode.toLowerCase()=="air"&&h.length>3){if(h[4].toLowerCase()=="air"){f="air"}}}}}}}}this._refdomain=this._referrer.protocol+"//"+((f!="")?f+"."+this._cookdomain:"s.nx.com")}else{this._refdomain=this._referrer.protocol+"//"+this._referrer.subDomain}}if(this.func.cook("NXLW").length>0){this._suid=this.func.cook("NXLW","SID");this._gaid=this.func.cook("NXLW","ID");this._cookpageCode=this.func.cook("NXLW","CP");if(this._globalstep==0&&this._naid!=this._gaid){if(this._gaid==""){this._globalstep=3}else{if(this._naid==""){this._globalstep=4}else{this._globalstep=5}}}if(this.func.cook("NXLW","DOM").length>0){var d=this.func.cook("NXLW","PTC")+"//"+this.func.cook("NXLW","DOM");if(this._refdomain==""){this._refdomain=d}else{if(d==(this._location.protocol+"//"+this._location.subDomain)!=this._refdomain){this._refdomain=d}}}}else{this._suid=this.func.newid();this._globalstep=this._globalstep==0?2:this._globalstep}this.func.cook("NXLW","","SID="+this._suid+"&PTC="+this._location.protocol+"&DOM="+this._location.subDomain+"&ID="+this._naid+"&CP="+this._pageCode,{domain:this._cookdomain,path:"/"});if(this.func.cook("NXPID").length>0){this._puid=this.func.cook("NXPID")}else{this._puid=this.func.newid();this._privatestep=1}if(this._gameCode=="fsf"){this.func.cook("NXPID","",this._puid,{domain:this._location.hostname,path:"/",expires:30})}else{this.func.cook("NXPID","",this._puid,{domain:this._location.subDomain,path:"/",expires:30})}if(this._gameCode=="ca"||this._gameCode=="maplestory"){if(this._privatestep==0){if(this.func.cook("NLWGID").length>0){if(this.func.cook("NLWGID")=="1"){if(this._identity.length<1){this._privatestep=4}}else{if(this._identity.length>0){this._privatestep=3}}}else{if(this._identity.length>0){this._privatestep=3}}}this.func.cook("NLWGID","",(this._identity.length>0)?"1":"0",{domain:this._location.subDomain,path:"/"})}if(this._refdomain!=this._location.protocol+"//"+this._location.subDomain&&this._refdomain!=""){this._globalstep=this._globalstep==0?6:this._globalstep}this._params.push("gmcode="+this._gameCode);this._params.push("scw="+screen.width);this._params.push("sch="+screen.height);if(this._identity.length>0){this._params.push("pid="+this._identity)}if(this._referrer.search.length>0){this._params.push("key="+encodeURIComponent(this.func.getKeyword(this._referrer)))}if((this._pageCode!=""&&this._pageCode!=this._cookpageCode)||this._globalstep>0||this._privatestep>0){var c=this.func.arrayclone(this._params);c.push("gstep="+this._globalstep);c.push("pstep="+this._privatestep);c.push("docode="+this._pageCode);if(this._referrer.hostname!=""){if((this._location.protocol+"//"+this._location.subDomain)==(this._referrer.protocol+"//"+this._referrer.subDomain)){c.push("ref="+encodeURIComponent(this._refdomain))}else{c.push("ref="+encodeURIComponent(decodeURIComponent(this._referrer.protocol+"//"+this._referrer.hostname+this._referrer.pathname.replace(/%/gi,"&#37")+this._referrer.search.replace(/%/gi,"&#37"))))}}else{c.push("ref="+encodeURIComponent(this._refdomain))}c.push("loc="+encodeURIComponent(b.location.href));var g=c.join("&");this.func.send("analytics.nexon.com/Trace/currentTracker.aspx?"+g)}this._ready=true};this.tracker=function(f,d){var c=this.func.arrayclone(this._params);c.push("gstep=0");c.push("pstep=0");c.push("docode="+d);c.push("ref="+encodeURIComponent(b.location.href));c.push("loc="+encodeURIComponent(f));var e=c.join("&");this.func.send("analytics.nexon.com/Trace/currentTracker.aspx?"+e)};this.playtracker=function(e,f){var c=this.func.arrayclone(this._params);c.push("gstep=0");c.push("pstep=0");c.push("docode="+e);if(typeof(f)!="undefined"){c.push("ngmgm="+f)}try{if(this._referrer.hostname!=""){if((this._location.protocol+"//"+this._location.subDomain)==(this._referrer.protocol+"//"+this._referrer.subDomain)){c.push("ref="+encodeURIComponent(this._refdomain))}else{c.push("ref="+encodeURIComponent(decodeURIComponent(this._referrer.protocol+"//"+this._referrer.hostname+this._referrer.pathname.replace(/%/gi,"&#37")+this._referrer.search.replace(/%/gi,"&#37"))))}}else{c.push("ref="+encodeURIComponent(this._refdomain))}}catch(d){}c.push("loc="+encodeURIComponent(b.location.href));var g=c.join("&");if(this._nxplaytimer==0){this._nxplaytimer++;setTimeout("_nxwc.resetTimer();",10000);this.func.send("analytics.nexon.com/Trace/currentTracker.aspx?"+g)}};this.resetTimer=function(){this._nxplaytimer=0}}b.__nxwc=a})(window);var _nxwc=new __nxwc();function _readyStateCheck(){if(document.readyState=="complete"||(!(document.location.protocol=="https:"&&document.location.hostname=="www.nexon.com")&&document.readyState=="interactive"&&document.body)){_nxwcinitfunc()}else{window.setTimeout("_readyStateCheck()",100)}}function _nxwcinitfunc(){if(!_nxwc._ready){_nxwc.initializeHandler()}}if(document.readyState){if(document.readyState=="complete"){_nxwcinitfunc()}else{window.setTimeout("_readyStateCheck()",100)}}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",_nxwcinitfunc,false)}}function nxTracker(b,a){if(_nxwc._ready){_nxwc.tracker(b,a)}}function nxPlayLoger(a,b){if(_nxwc._ready){_nxwc.playtracker(a,b)}};